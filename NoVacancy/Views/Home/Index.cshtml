@{
	ViewData["Title"] = "Home Page";
	var productosMasComprados = ViewBag.ProductosMasComprados as IEnumerable<dynamic>;
	var productosMejorCalificados = ViewBag.ProductosMejorCalificados as IEnumerable<dynamic>;
	var productosRecientes = ViewBag.ProductosRecientes as IEnumerable<dynamic>;
	string defaultImg = Url.Content("~/images/default-150x150.png");
}

<section>
	<div class="container mt-4 px-2 px-md-0">
		<div class="d-flex justify-content-center mb-4">
			<a href="@Url.Action("Store", "Home")" class="btn btn-dark btn-lg px-4 shadow rounded-pill d-flex align-items-center gap-2 ver-tienda-btn">
				<i class="bi bi-shop-window fs-5"></i>
				<span>Ver tienda</span>
			</a>
		</div>
		<h1 id="cabecera" class="fw-bold mb-3 text-center text-md-start">Más comprados</h1>
		<div class="row g-3">
			@if (productosMasComprados != null && productosMasComprados.Any())
			{
				foreach (var item in productosMasComprados)
				{
					<div class="col-12 col-sm-6 col-md-4 mb-3">
						<div class="card shadow-sm rounded-4 h-100 border-0 card-hover">
							<img src="@(string.IsNullOrEmpty(item.Imagen) ? defaultImg : Url.Content($"~/images/productos/{item.Imagen}"))" class="card-img-top p-3 mx-auto" alt="@item.Producto.nombre" style="object-fit:contain; height:180px; max-width:100%;">
							<div class="card-body d-flex flex-column">
								<h5 class="card-title fw-semibold">@item.Producto.nombre</h5>
								<p class="card-text text-success fw-bold">$@item.Producto.precio.ToString("0.00")</p>
								<a href="@Url.Action("Product_detail", "Home", new { nombre = item.Producto.nombre })" class="btn btn-outline-dark w-100 mt-auto">Ver más</a>
							</div>
						</div>
					</div>
				}
			}
			else
			{
				<div class="col-12">
					<div class="alert alert-info text-center">No hay productos más comprados aún.</div>
				</div>
			}
		</div>
	</div>
</section>

<section>
	<div class="container mt-5 px-2 px-md-0">
		<h1 id="cabecera" class="fw-bold mb-3 text-center text-md-start">Mejor calificados</h1>
		<div class="row g-3">
			@if (productosMejorCalificados != null && productosMejorCalificados.Any())
			{
				foreach (var item in productosMejorCalificados)
				{
					<div class="col-12 col-sm-6 col-md-4 mb-3">
						<div class="card shadow-sm rounded-4 h-100 border-0 card-hover">
							<img src="@(string.IsNullOrEmpty(item.Imagen) ? defaultImg : Url.Content($"~/images/productos/{item.Imagen}"))" class="card-img-top p-3 mx-auto" alt="@item.Producto.nombre" style="object-fit:contain; height:180px; max-width:100%;">
							<div class="card-body d-flex flex-column">
								<h5 class="card-title fw-semibold">@item.Producto.nombre</h5>
								<p class="card-text text-success fw-bold">$@item.Producto.precio.ToString("0.00")</p>
								<a href="@Url.Action("Product_detail", "Home", new { nombre = item.Producto.nombre })" class="btn btn-outline-dark w-100 mt-auto">Ver más</a>
							</div>
						</div>
					</div>
				}
			}
			else
			{
				<div class="col-12">
					<div class="alert alert-info text-center">No hay productos mejor calificados aún.</div>
				</div>
			}
		</div>
	</div>
</section>

<section>
	<div class="container mt-5 px-2 px-md-0">
		<h1 id="cabecera" class="fw-bold mb-3 text-center text-md-start">Nuevos productos</h1>
		<div class="row g-3">
			@if (productosRecientes != null && productosRecientes.Any())
			{
				foreach (var item in productosRecientes)
				{
					<div class="col-12 col-sm-6 col-md-4 mb-3">
						<div class="card shadow-sm rounded-4 h-100 border-0 card-hover">
							<img src="@(string.IsNullOrEmpty(item.Imagen) ? defaultImg : Url.Content($"~/images/productos/{item.Imagen}"))" class="card-img-top p-3 mx-auto" alt="@item.Producto.nombre" style="object-fit:contain; height:180px; max-width:100%;">
							<div class="card-body d-flex flex-column">
								<h5 class="card-title fw-semibold">@item.Producto.nombre</h5>
								<p class="card-text text-success fw-bold">$@item.Producto.precio.ToString("0.00")</p>
								<a href="@Url.Action("Product_detail", "Home", new { nombre = item.Producto.nombre })" class="btn btn-outline-dark w-100 mt-auto">Ver más</a>
							</div>
						</div>
					</div>
				}
			}
			else
			{
				<div class="col-12">
					<div class="alert alert-info text-center">No hay productos nuevos aún.</div>
				</div>
			}
		</div>
	</div>
</section>